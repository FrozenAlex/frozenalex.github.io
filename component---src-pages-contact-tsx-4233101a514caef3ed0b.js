(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0Aie":function(e,t,a){"use strict";a.r(t),a.d(t,"pageQuery",(function(){return r}));var s=a("q1tI"),n=a("N5vR"),o=a("H8eV"),l=a("ma3e");var i=({isLoading:e,message:t,children:a})=>s.createElement("div",{className:"loading-overlay",style:e?{}:{display:"none"}},s.createElement(l.b,{className:"loading-spinner",size:35}),s.createElement("div",{className:"loading-message"},t||""),a);class m extends s.Component{constructor(e){super(e),this.state={form:{name:"",message:"",loading:!1,loadingMessage:"",result:""}}}render(){let{data:e,location:t}=this.props;const a=e.site.siteMetadata.title;return s.createElement(n.a,{location:t,title:a},s.createElement(o.a,{title:"Contact"}),s.createElement("h1",{className:"m-5 text-2xl text-center"},"Contact form"),s.createElement("div",{className:"mx-auto max-w-md  bg-teal-400 result m-4 font-bold text-xl text-center"},this.state.form.result||""),s.createElement("form",{action:"https://frozen-feedback.herokuapp.com",method:"POST",className:"max-w-md mx-auto",encType:"multipart/form-data",onSubmit:this.handleSubmit.bind(this)},s.createElement("div",{className:"mb-4"},s.createElement("label",{className:"block text-gray-700 text-md text-center font-bold mb-2",htmlFor:"name"},"Name and Email"),s.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",value:this.state.form.name,onChange:this.handleChange.bind(this),type:"text",placeholder:"Name/Email",name:"name",maxLength:200,required:!0})),s.createElement("div",{className:"mb-4"},s.createElement("label",{className:"block text-gray-700  text-md text-center font-bold mb-2",htmlFor:"message"},"Message"),s.createElement("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline resize-y",id:"message",placeholder:"Message",onChange:this.handleChange.bind(this),value:this.state.form.message,name:"message",rows:5,maxLength:3896,required:!0})),s.createElement("div",{className:"mb-4"},s.createElement("label",{className:"block text-gray-700 text-md text-center font-bold mb-2",htmlFor:"file"},"File"),s.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"file",type:"file",placeholder:"File",name:"file"})),s.createElement("div",{className:"mb-4 text-center"},s.createElement("input",{className:"bg-teal-500 text-white font-bold rounded-full py-4 px-8 shadow-lg uppercase tracking-wider disabled:opacity-75 ",type:"submit",value:"Submit"}))),s.createElement(i,{isLoading:this.state.form.loading,message:this.state.form.loadingMessage}))}handleChange(e){this.setState({form:{...this.state.form,[e.target.id]:e.target.value}})}validate(){return""!=this.state.form.message&&""!=this.state.form.name}async handleSubmit(e){if(e.preventDefault(),!this.validate())return void alert("Invalid input. Check your name and message!");let t=new FormData;t.append("name",this.state.form.name),t.append("message",this.state.form.message);let a=document.getElementById("file").files[0];a&&t.append("file",a);try{this.setState({form:{...this.state.form,loadingMessage:"Trying to send a message, please wait...",loading:!0}});let e=await fetch("https://frozen-feedback.herokuapp.com/api",{method:"POST",body:t}),a=await e.json();"success"===a.type?this.setState({form:{...this.state.form,result:"Your message has been delivered. Thank you for your feedback!",loading:!1}}):this.setState({form:{...this.state.form,result:"Something went wrong, contact me on social media instead...",loading:!1}}),console.log(a)}catch(e){console.log(e),this.setState({form:{...this.state.form,result:"Something went wrong, contact me on social media instead...",loading:!1}})}}}t.default=m;const r="2785444898"}}]);
//# sourceMappingURL=component---src-pages-contact-tsx-4233101a514caef3ed0b.js.map